function is_member_type_issues_exists(e,r){for(var s=[],o=0;o<e.length;o++)if(e[o].member_role===r){s.push({id:e[o].id,books_borrow:e[o].books_borrow,fine:e[o].fine,member_role:e[o].member_role,returned_days:e[o].returned_days});break}return s}jQuery(document).ready(function(){if(jQuery(".wlmsTablesorter").length>0&&jQuery(".wlmsTablesorter").DataTable(),jQuery("#send_requested_books").length>0&&jQuery("#send_requested_books").click(function(){if(jQuery(".wlms-check-requested-this-book:checked").length>0){var e=[];jQuery(".wlms-check-requested-this-book:checked").each(function(){e.push(jQuery(this).val())}),jQuery(".wlms_overlay").show(),jQuery(".wlms_ajax_loader").show(),jQuery.ajax({type:"POST",url:ajax_object.ajaxurl,dataType:"json",data:{action:"wlms_add_requested_books_for_member",sParms_id:e,security:ajax_object.ajax_nonce},success:function(e){e&&""!=e&&(jQuery(".wlms_overlay").hide(),jQuery(".wlms_ajax_loader").hide(),"success"==e.status?(jQuery(".frontend-error").hide(),jQuery(".frontend-success").html(""),jQuery(".frontend-success").append(e.message),jQuery(".frontend-success").show()):"exist"==e.status&&(jQuery(".frontend-success").hide(),jQuery(".frontend-error").html(""),jQuery(".frontend-error").append(e.message),jQuery(".frontend-error").show()),jQuery(".wlms-check-requested-this-book").prop("checked",!1),jQuery(".wlms-check-requested-this-book").removeAttr("disabled"))}})}else jQuery(".frontend-success").hide(),jQuery(".frontend-error").html(""),jQuery(".frontend-error").append("Please select book for request"),jQuery(".frontend-error").show()}),jQuery(".wlms-check-requested-this-book").length>0){var e;jQuery(".wlms-check-requested-this-book").change(function(){if(jQuery("#wlms_issues_data").val().length>0){e=JSON.parse(jQuery("#wlms_issues_data").val());var r=is_member_type_issues_exists(e,jQuery("#wlms_current_user_role").val());r.length>0?jQuery(".wlms-check-requested-this-book:checked").length==r[0].books_borrow?(jQuery(".wlms-check-requested-this-book").attr("disabled","disabled"),jQuery(".wlms-check-requested-this-book:checked").removeAttr("disabled"),jQuery(".frontend-success").hide(),jQuery(".frontend-error").html(""),jQuery(".frontend-error").append("You can send request only "+r[0].books_borrow+" books"),jQuery(".frontend-error").show()):(jQuery(".wlms-check-requested-this-book").removeAttr("disabled"),jQuery(".frontend-success").hide(),jQuery(".frontend-error").hide()):(jQuery(".frontend-success").hide(),jQuery(".frontend-error").html(""),jQuery(".frontend-error").append("Currently your requested service not available"),jQuery(".frontend-error").show(),jQuery(this).prop("checked",!1))}else jQuery(".frontend-success").hide(),jQuery(".frontend-error").html(""),jQuery(".frontend-error").append("Currently requested service not available"),jQuery(".frontend-error").show(),jQuery(this).prop("checked",!1)})}});